{"ast":null,"code":"var _jsxFileName = \"/home/ivan/javascript_projects/connect_four/src/GameContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport { act } from 'react-dom/test-utils';\nimport { isLegalMove, findRowOfNewDisk, hasActivePlayerWon } from './GameLogic';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GameContext = /*#__PURE__*/React.createContext();\nconst initialBoardState = [];\n\nfor (let i = 0; i < 6; i++) {\n  initialBoardState[i] = [];\n\n  for (let j = 0; j < 7; j++) {\n    initialBoardState[i][j] = 0;\n  }\n}\n\nconst GameContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  // the children being passed in is the app component!!!\n  // do all of these variables need to be useState or can they be useRef ?boardState\n  const [colOfNewDisk, setColOfNewDisk] = useState(0);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [moveCounter, setMoveCounter] = useState(0);\n  const [currentCol, setCurrentCol] = useState(0);\n  const cellIndexOfNewDisk = useRef();\n  const winningPlayerNum = useRef(0);\n  const activePlayerNum = useRef(1);\n  const boardState = useRef(initialBoardState.map(elem => [...elem]));\n\n  const resetBoardState = () => {\n    boardState.current = initialBoardState.map(elem => [...elem]);\n  };\n\n  const currentBoardState = boardState.current;\n  useEffect(() => {\n    if (moveCounter === 0) return; // during inital render and game resets\n\n    const rowOfNewDisk = findRowOfNewDisk(currentBoardState, colOfNewDisk);\n    currentBoardState[rowOfNewDisk][colOfNewDisk] = activePlayerNum.current;\n    cellIndexOfNewDisk.current = rowOfNewDisk * 7 + colOfNewDisk;\n\n    if (hasActivePlayerWon(currentBoardState, activePlayerNum.current, [rowOfNewDisk, colOfNewDisk])) {\n      winningPlayerNum.current = activePlayerNum.current;\n      setIsGameOver(true);\n    } else if (moveCounter >= 42) {\n      // Draw\n      setIsGameOver(true);\n    } else {\n      activePlayerNum.current = activePlayerNum.current === 1 ? 2 : 1;\n    }\n  }, [moveCounter]);\n\n  const resetGame = async () => {\n    await setIsGameOver(false); // to prevent the gameover Modal from updating to an incorrect message\n\n    activePlayerNum.current = 1;\n    resetBoardState();\n    setMoveCounter(0);\n    winningPlayerNum.current = 0;\n    cellIndexOfNewDisk.current = undefined;\n  };\n\n  return /*#__PURE__*/_jsxDEV(GameContext.Provider, {\n    value: {\n      boardState: boardState.current,\n      activePlayerNum: activePlayerNum.current,\n      colOfNewDisk,\n      setColOfNewDisk,\n      moveCounter,\n      setMoveCounter,\n      isGameOver,\n      resetGame,\n      currentCol,\n      setCurrentCol,\n      cellIndexOfNewDisk: cellIndexOfNewDisk.current,\n      winningPlayerNum: winningPlayerNum.current\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 12\n  }, this);\n};\n\n_s(GameContextProvider, \"KPLzz8m+dUx8RjYAWmIBxf6yTL4=\");\n\n_c = GameContextProvider;\n\nconst useGameContext = () => {\n  _s2();\n\n  return useContext(GameContext);\n};\n\n_s2(useGameContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport { useGameContext, GameContextProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"GameContextProvider\");","map":{"version":3,"sources":["/home/ivan/javascript_projects/connect_four/src/GameContext.js"],"names":["React","useContext","useEffect","useRef","useState","act","isLegalMove","findRowOfNewDisk","hasActivePlayerWon","GameContext","createContext","initialBoardState","i","j","GameContextProvider","children","colOfNewDisk","setColOfNewDisk","isGameOver","setIsGameOver","moveCounter","setMoveCounter","currentCol","setCurrentCol","cellIndexOfNewDisk","winningPlayerNum","activePlayerNum","boardState","map","elem","resetBoardState","current","currentBoardState","rowOfNewDisk","resetGame","undefined","useGameContext"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useRef, useState} from 'react';\nimport { act } from 'react-dom/test-utils';\nimport {\n    isLegalMove, \n    findRowOfNewDisk, \n    hasActivePlayerWon\n} from './GameLogic';\nconst GameContext = React.createContext();\n\nconst initialBoardState = [];\nfor (let i = 0; i < 6; i++) {\n    initialBoardState[i] = [];\n    for (let j = 0; j < 7; j++) {\n        initialBoardState[i][j] = 0;\n    }\n}\n\nconst GameContextProvider = ({children}) => {\n    // the children being passed in is the app component!!!\n    // do all of these variables need to be useState or can they be useRef ?boardState\n    const [colOfNewDisk, setColOfNewDisk] = useState(0);\n    const [isGameOver, setIsGameOver] = useState(false);\n    const [moveCounter, setMoveCounter] = useState(0);\n    const [currentCol, setCurrentCol] = useState(0);\n\n    const cellIndexOfNewDisk = useRef();\n    const winningPlayerNum = useRef(0);\n    const activePlayerNum = useRef(1);\n    const boardState = useRef(initialBoardState.map(elem => [...elem]));\n\n    const resetBoardState = () => {\n        boardState.current = initialBoardState.map(elem => [...elem]);\n    }\n    const currentBoardState = boardState.current;\n\n    useEffect(() => {\n        if (moveCounter === 0) return; // during inital render and game resets\n        const rowOfNewDisk = findRowOfNewDisk(currentBoardState, colOfNewDisk);\n        currentBoardState[rowOfNewDisk][colOfNewDisk] = activePlayerNum.current;\n        cellIndexOfNewDisk.current = (rowOfNewDisk * 7) + colOfNewDisk;\n        if (hasActivePlayerWon(\n            currentBoardState, \n            activePlayerNum.current, \n            [rowOfNewDisk, colOfNewDisk]\n        )) {\n            winningPlayerNum.current = activePlayerNum.current; \n            setIsGameOver(true);\n        } else if (moveCounter >= 42) { \n            // Draw\n            setIsGameOver(true);\n        } else {\n            activePlayerNum.current = activePlayerNum.current === 1 ? 2 : 1;\n        }\n    }, [moveCounter]);\n\n    const resetGame = async () => {\n        await setIsGameOver(false); \n        // to prevent the gameover Modal from updating to an incorrect message\n        activePlayerNum.current = 1;\n        resetBoardState();\n        setMoveCounter(0);\n        winningPlayerNum.current = 0;\n        cellIndexOfNewDisk.current = undefined;\n    };\n    \n    return <GameContext.Provider value={{\n        boardState: boardState.current, \n        activePlayerNum: activePlayerNum.current,\n        colOfNewDisk,\n        setColOfNewDisk,\n        moveCounter, \n        setMoveCounter,\n        isGameOver,\n        resetGame,\n        currentCol,\n        setCurrentCol,\n        cellIndexOfNewDisk: cellIndexOfNewDisk.current,\n        winningPlayerNum: winningPlayerNum.current,\n    }}> \n        {children}\n    </GameContext.Provider>\n};\n\nconst useGameContext = () => {\n    return useContext(GameContext);\n}\n\nexport {useGameContext, GameContextProvider};\n"]},"metadata":{},"sourceType":"module"}