{"ast":null,"code":"var _jsxFileName = \"/home/ivan/javascript_projects/connect_four/src/GameContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { isLegalMove, findRowOfNewDisk, hasActivePlayerWon } from './GameLogic';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GameContext = /*#__PURE__*/React.createContext();\nconst initialBoardState = [];\n\nfor (let i = 0; i < 6; i++) {\n  initialBoardState[i] = [];\n\n  for (let j = 0; j < 7; j++) {\n    initialBoardState[i][j] = 0;\n  }\n}\n\nconst GameContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  // the children being passed in is the app component!!!\n  const [boardState, setBoardState] = useState(initialBoardState.map(elem => [...elem]));\n  const [activePlayerNum, setActivePlayerNum] = useState(1);\n  const [cellIndexOfNewDisk, setCellIndexOfNewDisk] = useState();\n  const [winningPlayerNum, setWinningPlayerNum] = useState(0); // maybe initital value for winningPlayerNum should be undefined ? \n\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [moveCounter, setMoveCounter] = useState(0);\n  const [currentCol, setCurrentCol] = useState(0);\n  useEffect(() => {\n    if (moveCounter === 0) return; // during inital render and game resets\n\n    const colOfNewDisk = cellIndexOfNewDisk % 7;\n    const rowOfNewDisk = findRowOfNewDisk(boardState, cellIndexOfNewDisk);\n    boardState[rowOfNewDisk][colOfNewDisk] = activePlayerNum;\n    setBoardState(boardState);\n\n    if (hasActivePlayerWon(boardState, activePlayerNum, [rowOfNewDisk, colOfNewDisk])) {\n      setWinningPlayerNum(activePlayerNum);\n      setIsGameOver(true);\n    } else if (moveCounter >= 42) {\n      // Draw\n      setIsGameOver(true);\n    } else {\n      const nextActivePlayerNum = activePlayerNum === 1 ? 2 : 1;\n      setActivePlayerNum(nextActivePlayerNum);\n    }\n  }, [moveCounter]);\n\n  const resetGame = () => {\n    setActivePlayerNum(1);\n    setBoardState(initialBoardState.map(elem => [...elem]));\n    setMoveCounter(0);\n    setIsGameOver(false);\n    setWinningPlayerNum(0);\n  };\n\n  return /*#__PURE__*/_jsxDEV(GameContext.Provider, {\n    value: {\n      boardState,\n      activePlayerNum,\n      cellIndexOfNewDisk,\n      setCellIndexOfNewDisk,\n      moveCounter,\n      setMoveCounter,\n      winningPlayerNum,\n      isGameOver,\n      resetGame,\n      currentCol,\n      setCurrentCol\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 12\n  }, this);\n};\n\n_s(GameContextProvider, \"RIrfB9OWcREbD7kC4Rqla+QZ9Vs=\");\n\n_c = GameContextProvider;\n\nconst useGameContext = () => {\n  _s2();\n\n  return useContext(GameContext);\n};\n\n_s2(useGameContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport { useGameContext, GameContextProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"GameContextProvider\");","map":{"version":3,"sources":["/home/ivan/javascript_projects/connect_four/src/GameContext.js"],"names":["React","useContext","useEffect","useState","isLegalMove","findRowOfNewDisk","hasActivePlayerWon","GameContext","createContext","initialBoardState","i","j","GameContextProvider","children","boardState","setBoardState","map","elem","activePlayerNum","setActivePlayerNum","cellIndexOfNewDisk","setCellIndexOfNewDisk","winningPlayerNum","setWinningPlayerNum","isGameOver","setIsGameOver","moveCounter","setMoveCounter","currentCol","setCurrentCol","colOfNewDisk","rowOfNewDisk","nextActivePlayerNum","resetGame","useGameContext"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\nimport {\n    isLegalMove, \n    findRowOfNewDisk, \n    hasActivePlayerWon\n} from './GameLogic';\nconst GameContext = React.createContext();\n\nconst initialBoardState = [];\nfor (let i = 0; i < 6; i++) {\n    initialBoardState[i] = [];\n    for (let j = 0; j < 7; j++) {\n        initialBoardState[i][j] = 0;\n    }\n}\n\nconst GameContextProvider = ({children}) => {\n    // the children being passed in is the app component!!!\n    const [boardState, setBoardState] = useState(initialBoardState.map(elem => [...elem]));\n    const [activePlayerNum, setActivePlayerNum] = useState(1);\n    const [cellIndexOfNewDisk, setCellIndexOfNewDisk] = useState();\n    const [winningPlayerNum, setWinningPlayerNum] = useState(0); \n    // maybe initital value for winningPlayerNum should be undefined ? \n    const [isGameOver, setIsGameOver] = useState(false);\n    const [moveCounter, setMoveCounter] = useState(0);\n    const [currentCol, setCurrentCol] = useState(0);\n\n    useEffect(() => {\n        if (moveCounter === 0) return; // during inital render and game resets\n        const colOfNewDisk = cellIndexOfNewDisk % 7;\n        const rowOfNewDisk = findRowOfNewDisk(boardState, cellIndexOfNewDisk);\n        boardState[rowOfNewDisk][colOfNewDisk] = activePlayerNum;\n        setBoardState(boardState);\n        if (hasActivePlayerWon(\n            boardState, \n            activePlayerNum, \n            [rowOfNewDisk, colOfNewDisk]\n        )) { \n            setWinningPlayerNum(activePlayerNum);\n            setIsGameOver(true);\n        } else if (moveCounter >= 42) { \n            // Draw\n            setIsGameOver(true);\n        } else {\n            const nextActivePlayerNum = activePlayerNum === 1 ? 2 : 1;\n            setActivePlayerNum(nextActivePlayerNum);\n        }\n    }, [moveCounter]);\n\n    const resetGame = () => {\n        setActivePlayerNum(1);\n        setBoardState(initialBoardState.map(elem => [...elem]));\n        setMoveCounter(0);\n        setIsGameOver(false);\n        setWinningPlayerNum(0);\n    };\n    \n    return <GameContext.Provider value={{\n        boardState, \n        activePlayerNum,\n        cellIndexOfNewDisk,\n        setCellIndexOfNewDisk,\n        moveCounter, \n        setMoveCounter,\n        winningPlayerNum,\n        isGameOver,\n        resetGame,\n        currentCol,\n        setCurrentCol,\n    }}> \n        {children}\n    </GameContext.Provider>\n};\n\nconst useGameContext = () => {\n    return useContext(GameContext);\n}\n\nexport {useGameContext, GameContextProvider};\n"]},"metadata":{},"sourceType":"module"}